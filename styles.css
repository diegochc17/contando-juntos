:root{ --sea:#97B3AE; --mint:#D2E0D3; --blush:#F0DDD6; --peach:#F2C3B9; --sand:#D6CBBF; --shell:#F0EEEA; --ink:#28343f; --red:#FF8B94; }
*{box-sizing:border-box}
html,body{height:100%}
body{ margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; color:var(--ink); background: linear-gradient(120deg, var(--mint), var(--shell)); }
.app{ max-width:980px; margin:0 auto; padding:16px; display:grid; gap:16px }
.header{ display:flex; justify-content:space-between; align-items:center; gap:12px; padding:10px 14px; border-radius:18px; background:var(--sand); border:2px solid rgba(0,0,0,.04) }
.header h1{ margin:0; font-size:1.1rem }
.wrap{ display:grid; grid-template-columns: 1fr 380px; gap:16px; align-items:start }
@media (max-width: 900px){ .wrap{ grid-template-columns:1fr } }
.card{ background:var(--shell); border:2px solid rgba(0,0,0,.06); border-radius:22px; box-shadow:0 8px 24px rgba(0,0,0,.06) }

.display{ padding:18px }
.screen{ --hue:158; --pct:0%; background: radial-gradient(120% 140% at 20% 20%, hsla(var(--hue) 45% 88% / 1), hsla(var(--hue) 40% 82% / 1)); border:6px solid rgba(0,0,0,.25); color:#111; border-radius:28px; padding:14px 18px; text-align:center; position:relative; overflow:hidden; box-shadow: 0 0 0 0 hsla(var(--hue) 60% 50% /.35) }
.focus .screen{ animation: pulse var(--pulse) ease-in-out infinite }
@keyframes pulse{ 0%{ box-shadow:0 0 0 0 hsla(var(--hue) 60% 50% /.25)} 70%{ box-shadow:0 0 0 22px hsla(var(--hue) 60% 50% /0)} 100%{ box-shadow:0 0 0 0 hsla(var(--hue) 60% 50% /0)} }
.fuse-track{ position:absolute; left:14px; right:14px; top:12px; height:12px; border-radius:999px; background: rgba(255,255,255,.55); border:1px solid rgba(0,0,0,.08); overflow:hidden }
.fuse{ position:absolute; left:0; top:0; bottom:0; width: calc(var(--pct) * 1%); background: linear-gradient(90deg, hsla(48 95% 75% / .9), hsla(18 90% 70% /.9)); border-right:2px solid rgba(0,0,0,.15) }
.fuse::after{ content:""; position:absolute; right:-6px; top:50%; width:14px; height:14px; transform: translateY(-50%); border-radius:50%; background: radial-gradient(circle, #fff, #ffd29a 60%, transparent 70%); filter: blur(0.2px); animation: flicker .6s infinite alternate }
@keyframes flicker{ from{ transform:translateY(-50%) scale(1)} to{ transform:translateY(-50%) scale(1.15)} }
.time{ font-variant-numeric:tabular-nums; font-size: clamp(48px, 9vmin, 110px); font-weight:900; letter-spacing:2px; margin-top:10px }
.sub{ font-size:.95rem; opacity:.75 }

.controls{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; padding:12px 16px }
.btn{ appearance:none; border:none; border-radius:16px; padding:14px 18px; font-weight:800; cursor:pointer; color:#0f1a22 }
.btn.start{ background:var(--sea) } .btn.reset{ background:var(--peach) } .btn.full{ background:var(--sand) } .btn.back{ background:var(--blush) }

.tiny{ padding:8px 12px; text-align:center; opacity:.85 }

.presets{ display:grid; grid-template-columns: repeat(4, 1fr); gap:10px; margin-top:8px }
@media (max-width: 900px){ .presets{ grid-template-columns: repeat(2, 1fr) } }
.preset{ background:var(--sand); border:2px solid rgba(0,0,0,.12); border-radius:14px; padding:10px 0; text-align:center; font-weight:800; cursor:pointer }

.side{ padding:14px; display:grid; gap:12px }
.group{ background:var(--blush); border:2px solid rgba(0,0,0,.06); border-radius:18px; padding:12px }

.keypad-wrap{ padding:0 18px 18px }
.keypad{ display:grid; grid-template-columns: repeat(5, 1fr); gap:14px }
.key{ background:var(--sea); border:4px solid rgba(0,0,0,.25); color:#06221d; border-radius:22px; padding:15px 28px; font-size:2rem; font-weight:900; text-align:center; cursor:pointer; user-select:none }
.key.remove{ background:var(--red); color:#1d0f12; grid-column:1 / span 2 }
.key.clear{ background:var(--sand); grid-column:3 / span 3; color:#0f1a22 }

.select{ position:relative }
select{ -webkit-appearance:none; appearance:none; width:100%; padding:12px 42px 12px 14px; border-radius:14px; border:2px solid rgba(0,0,0,.12); background:linear-gradient(180deg,#ffffff,#f6f6f6); font-weight:600; color:var(--ink); cursor:pointer }
.select::after{ content:""; position:absolute; right:12px; top:50%; transform:translateY(-50%); width:0; height:0; border-left:6px solid transparent; border-right:6px solid transparent; border-top:8px solid #6b7280; pointer-events:none }
select:focus{ outline:3px solid rgba(151,179,174,.45) }

.chk{ display:flex; align-items:center; gap:10px; padding:8px 10px; border-radius:12px; background:rgba(0,0,0,.03); border:2px solid rgba(0,0,0,.06) }
.chk input[type="checkbox"]{ appearance:none; width:22px; height:22px; border-radius:6px; border:2px solid rgba(0,0,0,.25); background:#fff; display:grid; place-items:center; position:relative; outline:none; cursor:pointer }
.chk input[type="checkbox"]:focus{ box-shadow:0 0 0 3px rgba(151,179,174,.4) }
.chk input[type="checkbox"]::after{ content:""; width:12px; height:12px; border-radius:3px; background:var(--sea); transform:scale(0); transition:transform .18s ease }
.chk input[type="checkbox"]:checked::after{ transform:scale(1) }
.chk span{ font-weight:600 }

.focus .header{ display:none } .focus .wrap{ grid-template-columns:1fr } .focus .side{ display:none } .focus .keypad-wrap{ display:none } .focus .tiny{ display:none } .focus main.card{ padding-bottom:20px } .focus .display{ padding:6vh 18px 2vh } .focus .time{ font-size: clamp(64px, 14vmin, 180px) } .hidden{ display:none !important }
